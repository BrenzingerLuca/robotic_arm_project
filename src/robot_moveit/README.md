# robot_moveit

## Overview

The `robot_moveit` package contains all MoveIt 2 related configuration files for the **PiBot** robotic arm. It defines how the robot is represented inside MoveIt, how motion planning is performed, and how planned trajectories are executed using ROS 2 controllers.

This package is intentionally **configuration-only**. It does not contain custom C++ or Python nodes. Instead, it provides YAML, SRDF, and launch files that integrate the robot with the MoveIt 2 framework.

---

## Package Structure

```
robot_moveit/
├── config/
│   ├── initial_positions.yaml
│   ├── joint_limits.yaml
│   ├── kinematics.yaml
│   ├── moveit_controllers.yaml
│   ├── pilz_cartesian.yaml
│   └── robot.srdf
│
├── launch/
│   └── moveit.launch.py
├── src/
├── include/
└── package.xml
└── CMakeLists.txt
```

---

## Configuration Files

### `initial_positions.yaml`

Defines the initial joint positions used by MoveIt when starting the system. These values represent a safe **home pose**.

```yaml
initial_position:
  joint_1: 0
  joint_2: 0
  joint_3: 0
  gripper: 0
```

---

### `joint_limits.yaml`

Defines velocity and acceleration limits for each joint. These limits are enforced during motion planning and execution.

Key parameters:

* `default_velocity_scaling_factor`
* `default_acceleration_scaling_factor`
* `Per-joint velocity and acceleration constraints`

These limits should match the physical capabilities of the real robot.

---

### `kinematics.yaml`

Configures the inverse kinematics (IK) solver for the robot arm.

* Uses the **KDL kinematics plugin**
* Optimized for position-only IK
* Defines solver resolution and timeout

```yaml
arm:
  kinematics_solver: kdl_kinematics_plugin/KDLKinematicsPlugin
  kinematics_solver_search_resolution: 0.005
  kinematics_solver_timeout: 0.1
  position_only_ik: true
```

---

### `moveit_controllers.yaml`

Connects MoveIt to the ROS 2 controllers responsible for executing trajectories.

Configured controllers:

* `arm_controller` (FollowJointTrajectory)
* `gripper_controller` (GripperCommand)

These names must exactly match the controllers defined in the `robot_controllers.yaml` file in the `robot_controller` package.

---

### `pilz_cartesian.yaml`

Defines Cartesian motion limits used by the **Pilz Industrial Motion Planner**.

This enables safe and constrained Cartesian motions such as linear moves.

---

### `robot.srdf`

The Semantic Robot Description Format (SRDF) defines:

* Planning groups (`arm`, `gripper`)
* End effector definition
* Named group states (e.g. `home`)
* Disabled self-collisions for adjacent links

The SRDF works together with the URDF from `robot_description`.

---

## Launch File

### `moveit.launch.py`

This launch file starts the full MoveIt environment:

* Loads the robot URDF and SRDF
* Starts the `move_group` node
* Launches RViz with a MoveIt-specific configuration

A launch argument `is_sim` is provided to enable simulated time. This allows future integration with Gazebo or other simulators without changing the MoveIt configuration.

Example:

```bash
ros2 launch robot_moveit moveit.launch.py
```

---

## Interaction with Other Packages

* **robot_description**

  * Provides the URDF and meshes

* **robot_controller**

  * Executes trajectories generated by MoveIt

* **robot_gui / custom nodes**

  * Can send goals to MoveIt via the `move_group` interface

---

## Future Extensions

The package is designed to be easily extended with:

* Gazebo simulation support
* Additional planning pipelines (e.g. Pilz, STOMP)
* Collision objects and planning scenes

---

## Summary

The `robot_moveit` package provides a clean and modular MoveIt 2 configuration for the PiBot robot. It separates planning, execution, and description concerns, follows ROS 2 best practices, and serves as a solid foundation for both simulation and real-world operation.
